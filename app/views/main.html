<div ng-controller="MainCtrl" class="MainCtrl">
	<file-loader lines="lines" class="pull-left"></file-loader>
	<div class="container">
		<div class="row">
			<div line-chart data="data" class="chart span6"></div>

			<div class="tags span2">
				<h4>Tags</h4>
				<table>
						<tr>
							<th></th>
							<th>plot</th>
							<th>view</th>
							<th></th>
						</tr>
					<tr ng-repeat="tag in p.tags">
						<td><input type="text" class="" ng-model="tag.value" /></td>
						<td><input type="checkbox" ng-model="tag.plot"></td>
						<td><input type="checkbox" ng-model="tag.view"></td>
						<td><a ng-click="p.tags.splice($index, $index+1)" href="#">[x]</a></td>
					</tr>
				</table>
				<input type="button" class="btn" ng-click="p.tags.push({plot:true,view:true})" value="add" />
			</div>
		</div>

		<div class="row">
			<a ng-click="p.settings.expanded=!p.settings.expanded">Settings</a>
			<div ng-class="{true: 'in', false:''}[p.settings.expanded]" class="settings collapse">
				
				<div class="dateFormat">
					<input type="text" ng-model="p.dateSearch" placeholder="dateSearch" />
					<input type="text" ng-model="p.dateFormat" placeholder="dateFormat" />
				</div>
				<input type="text" ng-model="p.subsetCount" placeholder="subset count" />
				<input type="text" ng-model="p.subsetStart" placeholder="subset start" />
			</div>
		</div>

		<div class="row">
			<ul class="logLines">
		  	<li ng-repeat="line in lines | viewTagedLines:p.tags | subset:p.subsetStart:10 |highlight:p.dateSearch">
		  		<p id="line{{$index}}"><span class="date">{{getDate(line)|date:'medium'}}</span>{{line}}</p>
		  	</li>
			</ul>
			<ul class="pager">
			  <li class="previous" ng-class="{true:'.disabled',false:''}[p.subsetStart==0]">
			    <a href="#">&larr; Older</a>
			  </li>
			  <li class="next">
			    <a href="#">Newer &rarr;</a>
			  </li>
			</ul>
		</div>
		<div class="row" ng-include="views/linesViewer.html"></div>
	</div>
</div>