<div ng-controller="MainCtrl" class="MainCtrl">
	<file-loader lines="lines" class="pull-left"></file-loader>
	<div class="container">
		<div class="row">
			<div line-chart data="data" class="chart span6"></div>

			<div class="tags span2">
				<h4>Tags</h4>
				<table>
						<tr>
							<th></th>
							<th>plot</th>
							<th>view</th>
							<th></th>
						</tr>
					<tr ng-repeat="tag in p.tags">
						<td><input type="text" class="" ng-model="tag.value" /></td>
						<td><input type="checkbox" ng-model="tag.plot"></td>
						<td><input type="checkbox" ng-model="tag.view"></td>
						<td><a ng-click="p.tags.splice($index, $index+1)" href="#">[x]</a></td>
					</tr>
					<tr>
						<td>Show All</td>
						<td><input type="checkbox" ng-model="p.showAll"></td>
					</tr>
				</table>
				<input type="button" class="btn" ng-click="p.tags.push({plot:true,view:true})" value="add" />
			</div>
		</div>

		<div class="row">

			<input type="button" value="settings" class="btn" ng-click="modalShown=true;pause=true;">
			<label class="checkbox">
				<input type="checkbox" ng-model="pause" value="pause" /> Pause loading.
			</label>
			
			
			<div ui-modal class="settings fade" ng-model="modalShown">
				<div>
				<a ng-click="modalShown=false;pause=false;">close</a>
				<div class="hero-unit">
					<div class="dateFormat">
						<label>dateSearch</label>
						<input type="text" ng-model="p.dateSearch" placeholder="dateSearch" />
						<label>dateFormat</label>
						<input type="text" ng-model="p.dateFormat" placeholder="dateFormat" /><i class="icon-warning-sign" />
						<h4>format</h4>
						<p>{{getDate(lines[paginationStart])|date:'short'}}</p>
							<li ng-repeat="line in lines | viewTaggedLines:p.tags:p.showAll | subset:paginationStart:2 | highlight:p.dateSearch">
					  		<p id="line{{$index}}" ng-bind-html-unsafe="line"></p>
					  	</li>
						</div>
						<div>
							<label>subsetCount</label>
							<input type="text" ng-model="p.subsetCount" placeholder="subset count" />
							<label>subsetStart</label>
							<input type="text" ng-model="p.subsetStart" placeholder="subset start" />
						</div>
					</div>
				</div>
			</div>

		<div class="row">
			<ul class="logLines">
		  	<li ng-repeat="line in lines | viewTaggedLines:p.tags:p.showAll | subset:paginationStart:paginationSize">
		  		<p id="line{{$index}}">{{line}}</p>
		  	</li>
			</ul>
			<ul class="pager">
			  <li class="previous" ng-class="{true:'.disabled',false:''}[p.subsetStart==0]">
			    <a href="#">&larr; Older | <b>{{paginationStart}}</b></a>
			  </li>
			  <li class="next">
			    <a href="#"><b>{{lines.length}}</b> | Newer &rarr;</a>
			  </li>
			</ul>
		</div>
	</div>
</div>